<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>toio用リンク生成</title>
  <script>
    window.onload = function () {
      const params = new URLSearchParams(window.location.search);

      const GetID = params.get("id");
      const GetSB3 = params.get("sb3");
      const GetNAME = params.get("name");
      const GetFULLSCREEN = params.get("fullscreen");

      const output = document.getElementById("output");

      // ベースURL（最初に固定で追加）
      let url = "https://do.toio.io/r?link=https://toio.github.io/toio-visual-programming/beta/?project%3D?";

      // sb3 が指定されていればプロジェクトURL追加
      if (GetSB3) {
        url += "project%3Dhttps%3A%2F%2Fuchidascience.github.io%2Fmessege_app%2F";
        url += encodeURIComponent(GetSB3);
      }

      // fullscreen が指定されていれば追加
      if (GetFULLSCREEN !== null) {
        url += "%26fullscreen%3Dtrue";
      }

      // id が指定されていれば追加
      if (GetID) {
        url += "%26id%3D" + encodeURIComponent(GetID);
      }

      // 最後に固定の追加文字列
      url += "%26ibi%3Dio.toio.toiodo";

      // URLを表示（sb3, id, name, fullscreen のいずれかが指定されていればOKとする）
      if (GetSB3 || GetID || GetNAME || GetFULLSCREEN !== null) {
        output.innerHTML = `<a href="${url}" target="_blank">${url}</a>`;
      } else {
        output.textContent = "URLが間違っています。";
      }
    };
  </script>
</head>
<body>
  <h1>toio用リンク生成</h1>
  <p id="output">読み込み中...</p>
</body>
</html>